<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <script type="text/javascript" src="http://api.map.baidu.com/api?v=1.4"></script>
    <script type="text/javascript" src="http://api.map.baidu.com/library/Heatmap/2.0/src/Heatmap_min.js"></script>
    <title>热力图功能示例</title>
    <style type="text/css">
        ul,li{list-style: none;margin:0;padding:0;float:left;}
        html{height:100%}
        body{height:100%;margin:0px;padding:0px;font-family:"微软雅黑";}
        #container{height:95%;width:100%;}
        #r-result{width:100%;}
    </style>
</head>
<body onload="openHeatmap()">
    <div id="container"></div>
    <div id="r-result">
        <a href="data0100.html">00:00-01:00</a>
        <a href="data0101.html">01:00-02:00</a>
        <a href="data0102.html">02:00-03:00</a>
        <a href="data0103.html">03:00-04:00</a>
        <a href="data0104.html">04:00-05:00</a>
        <a href="data0105.html">05:00-06:00</a>
        <a href="data0106.html">06:00-07:00</a>
        <a href="data0107.html">07:00-08:00</a>
        <a href="data0108.html">08:00-09:00</a>
        <a href="data0109.html">09:00-10:00</a>
        <a href="data0110.html">10:00-11:00</a>
        <a href="data0111.html">11:00-12:00</a>
        <a href="data0112.html">12:00-13:00</a>
        <a href="data0113.html">13:00-14:00</a>
        <a href="data0114.html">14:00-15:00</a>
        <a href="data0115.html">15:00-16:00</a>
        <a href="data0116.html">16:00-17:00</a>
        <a href="data0117.html">17:00-18:00</a>
        <a href="data0118.html">18:00-19:00</a>
        <a href="data0119.html">19:00-20:00</a>
        <a href="data0120.html">20:00-21:00</a>
        <a href="data0121.html">21:00-22:00</a>
        <a href="data0122.html">22:00-23:00</a>
        <a href="data0123.html">23:00-24:00</a>
        <input type="button"  onclick="openHeatmap();" value="显示热力图"/><input type="button"  onclick="closeHeatmap();" value="关闭热力图"/>
    </div>
</body>
</html>
<script type="text/javascript">
    var map = new BMap.Map("container");          // 创建地图实例

    var point = new BMap.Point(108.97, 34.25);
    map.centerAndZoom(point,15);             // 初始化地图，设置中心点坐标和地图级别
    map.enableScrollWheelZoom(); // 允许滚轮缩放
    var points = [{"lat":34.24761,"lng":108.94294,"count":1},
{"lat":34.25087,"lng":108.93258,"count":1},
{"lat":34.22573,"lng":108.94693,"count":1},
{"lat":34.24644,"lng":108.94685,"count":1},
{"lat":34.25105,"lng":108.95369,"count":1},
{"lat":34.23726,"lng":108.97246,"count":1},
{"lat":34.26433,"lng":108.96515,"count":1},
{"lat":34.25936,"lng":108.97481,"count":1},
{"lat":34.26961,"lng":108.9817,"count":1},
{"lat":34.22492,"lng":108.96405,"count":1},
{"lat":34.259,"lng":108.92604,"count":1},
{"lat":34.24737,"lng":108.94294,"count":1},
{"lat":34.26543,"lng":108.94732,"count":1},
{"lat":34.25849,"lng":108.96053,"count":1},
{"lat":34.25746,"lng":108.9389,"count":1},
{"lat":34.22543,"lng":108.9426,"count":1},
{"lat":34.22069,"lng":108.9806,"count":1},
{"lat":34.25794,"lng":108.9863,"count":1},
{"lat":34.26205,"lng":108.92276,"count":1},
{"lat":34.25526,"lng":108.94695,"count":1},
{"lat":34.21448,"lng":108.94296,"count":1},
{"lat":34.25015,"lng":108.92323,"count":1},
{"lat":34.24508,"lng":108.9891,"count":1},
{"lat":34.26303,"lng":108.93043,"count":1},
{"lat":34.25389,"lng":108.92028,"count":1},
{"lat":34.21839,"lng":108.96784,"count":1},
{"lat":34.21187,"lng":108.92381,"count":1},
{"lat":34.26959,"lng":108.93246,"count":1},
{"lat":34.24534,"lng":108.94685,"count":1},
{"lat":34.23238,"lng":108.97407,"count":1},
{"lat":34.25723,"lng":108.96312,"count":1},
{"lat":34.26433,"lng":108.96519,"count":1},
{"lat":34.22288,"lng":108.94171,"count":1},
{"lat":34.21453,"lng":108.93229,"count":1},
{"lat":34.24514,"lng":108.95372,"count":1},
{"lat":34.26813,"lng":108.94838,"count":1},
{"lat":34.26266,"lng":108.93111,"count":1},
{"lat":34.23017,"lng":108.93118,"count":1},
{"lat":34.24354,"lng":108.92722,"count":1},
{"lat":34.21532,"lng":108.96501,"count":1},
{"lat":34.25952,"lng":108.95864,"count":1},
{"lat":34.25578,"lng":108.92712,"count":1},
{"lat":34.23048,"lng":108.9288,"count":1},
{"lat":34.25095,"lng":108.94343,"count":1},
{"lat":34.22346,"lng":108.93201,"count":1},
{"lat":34.26646,"lng":108.92234,"count":1},
{"lat":34.2556,"lng":108.94009,"count":1},
{"lat":34.23017,"lng":108.93109,"count":1},
{"lat":34.23756,"lng":108.9487,"count":1},
{"lat":34.26698,"lng":108.9629,"count":1},
{"lat":34.23017,"lng":108.9311,"count":1},
{"lat":34.25952,"lng":108.93152,"count":1},
{"lat":34.25545,"lng":108.94382,"count":1},
{"lat":34.23336,"lng":108.97166,"count":1},
{"lat":34.25364,"lng":108.93893,"count":1},
{"lat":34.25105,"lng":108.95339,"count":1},
{"lat":34.25952,"lng":108.93926,"count":1},
{"lat":34.23587,"lng":108.94925,"count":1},
{"lat":34.2252,"lng":108.94669,"count":1},
{"lat":34.21172,"lng":108.96161,"count":1},
{"lat":34.2508,"lng":108.92642,"count":1},
{"lat":34.25043,"lng":108.94449,"count":1},
{"lat":34.23547,"lng":108.92553,"count":1},
{"lat":34.26469,"lng":108.96296,"count":1},
{"lat":34.22529,"lng":108.96755,"count":1},
{"lat":34.2178,"lng":108.9812,"count":1},
{"lat":34.24127,"lng":108.93426,"count":1},
{"lat":34.2503,"lng":108.95008,"count":1},
{"lat":34.24893,"lng":108.93235,"count":1},
{"lat":34.2515,"lng":108.92025,"count":1},
{"lat":34.25803,"lng":108.95243,"count":1},
{"lat":34.26709,"lng":108.96304,"count":1},
{"lat":34.24474,"lng":108.94293,"count":1},
{"lat":34.25806,"lng":108.95394,"count":1},
{"lat":34.24378,"lng":108.92348,"count":1},
{"lat":34.25924,"lng":108.92178,"count":1},
{"lat":34.23027,"lng":108.93042,"count":1},
{"lat":34.21486,"lng":108.92533,"count":1},
{"lat":34.25545,"lng":108.94348,"count":1},
{"lat":34.25954,"lng":108.94932,"count":1},
{"lat":34.25751,"lng":108.96311,"count":1},
{"lat":34.25385,"lng":108.93892,"count":1},
{"lat":34.24281,"lng":108.9636,"count":1},
{"lat":34.22276,"lng":108.94043,"count":1},
{"lat":34.24286,"lng":108.93591,"count":1},
{"lat":34.25081,"lng":108.95315,"count":1},
{"lat":34.25562,"lng":108.9397,"count":1},
{"lat":34.233,"lng":108.96753,"count":1},
{"lat":34.2508,"lng":108.93528,"count":1},
{"lat":34.21178,"lng":108.93737,"count":1},
{"lat":34.26432,"lng":108.96069,"count":1},
{"lat":34.25063,"lng":108.9503,"count":1},
{"lat":34.21183,"lng":108.92845,"count":1},
{"lat":34.24802,"lng":108.9884,"count":1},
{"lat":34.23075,"lng":108.92823,"count":1},
{"lat":34.26274,"lng":108.97844,"count":1},
{"lat":34.25932,"lng":108.93928,"count":1},
{"lat":34.23507,"lng":108.95382,"count":1},
{"lat":34.2641,"lng":108.96514,"count":1},
{"lat":34.26121,"lng":108.97488,"count":1},
{"lat":34.25561,"lng":108.93972,"count":1},
{"lat":34.25213,"lng":108.93608,"count":1},
{"lat":34.23205,"lng":108.94674,"count":1},
{"lat":34.23833,"lng":108.98191,"count":1},
{"lat":34.25813,"lng":108.94815,"count":1},
{"lat":34.25204,"lng":108.94626,"count":1},
{"lat":34.25593,"lng":108.95391,"count":1},
{"lat":34.2595,"lng":108.92941,"count":1},
{"lat":34.26416,"lng":108.98639,"count":1},
{"lat":34.22014,"lng":108.92585,"count":1},
{"lat":34.2569,"lng":108.9389,"count":1},
{"lat":34.23263,"lng":108.94689,"count":1},
{"lat":34.21997,"lng":108.9468,"count":1},
{"lat":34.25061,"lng":108.93907,"count":1},
{"lat":34.23689,"lng":108.98119,"count":1},
{"lat":34.26592,"lng":108.96429,"count":1},
{"lat":34.25941,"lng":108.93222,"count":1},
{"lat":34.23558,"lng":108.96639,"count":1},
{"lat":34.2508,"lng":108.93629,"count":1},
{"lat":34.22285,"lng":108.95946,"count":1},
{"lat":34.23935,"lng":108.93227,"count":1},
{"lat":34.21165,"lng":108.95689,"count":1},
{"lat":34.22128,"lng":108.9218,"count":1},
{"lat":34.25852,"lng":108.93891,"count":1},
{"lat":34.21181,"lng":108.93873,"count":1},
{"lat":34.22007,"lng":108.92099,"count":1},
{"lat":34.25706,"lng":108.96295,"count":1},
{"lat":34.25972,"lng":108.93254,"count":1},
{"lat":34.23587,"lng":108.92384,"count":1},
{"lat":34.24112,"lng":108.95094,"count":1},
{"lat":34.25035,"lng":108.95392,"count":1},
{"lat":34.2258,"lng":108.94685,"count":1},
{"lat":34.26316,"lng":108.93539,"count":1},
{"lat":34.25204,"lng":108.95935,"count":1},
{"lat":34.25536,"lng":108.94685,"count":1},
{"lat":34.23672,"lng":108.92338,"count":1},
{"lat":34.22562,"lng":108.97529,"count":1},
{"lat":34.24589,"lng":108.96584,"count":1},
{"lat":34.2593,"lng":108.97789,"count":1},
{"lat":34.26995,"lng":108.94546,"count":1},
{"lat":34.25599,"lng":108.9471,"count":1},
{"lat":34.23741,"lng":108.93196,"count":1},
{"lat":34.26122,"lng":108.97491,"count":1},
{"lat":34.2312,"lng":108.93927,"count":1},
{"lat":34.22837,"lng":108.94688,"count":1},
{"lat":34.2204,"lng":108.92133,"count":1},
{"lat":34.2577,"lng":108.92552,"count":1},
{"lat":34.25962,"lng":108.95949,"count":1},
{"lat":34.25089,"lng":108.92017,"count":1},
{"lat":34.22288,"lng":108.94136,"count":1},
{"lat":34.24133,"lng":108.9838,"count":1},
{"lat":34.24338,"lng":108.94698,"count":1},
{"lat":34.25199,"lng":108.94168,"count":1},
{"lat":34.22366,"lng":108.96408,"count":1},
{"lat":34.24736,"lng":108.96352,"count":1},
{"lat":34.25889,"lng":108.9471,"count":1},
{"lat":34.22152,"lng":108.94667,"count":1},
{"lat":34.2117,"lng":108.95575,"count":1},
{"lat":34.21204,"lng":108.94674,"count":1},
{"lat":34.25545,"lng":108.94451,"count":1},
{"lat":34.25954,"lng":108.94933,"count":1},
{"lat":34.22118,"lng":108.98828,"count":1},
{"lat":34.25105,"lng":108.97909,"count":1},
{"lat":34.25806,"lng":108.9631,"count":1},
{"lat":34.23607,"lng":108.93899,"count":1},
{"lat":34.26905,"lng":108.92268,"count":1},
{"lat":34.26592,"lng":108.96414,"count":1},
{"lat":34.26373,"lng":108.96513,"count":1},
{"lat":34.22672,"lng":108.93203,"count":1},
{"lat":34.24121,"lng":108.92091,"count":1},
{"lat":34.23014,"lng":108.9315,"count":1},
{"lat":34.24122,"lng":108.95238,"count":1},
{"lat":34.23336,"lng":108.96452,"count":1},
{"lat":34.22276,"lng":108.93218,"count":1},
{"lat":34.25805,"lng":108.94347,"count":1},
{"lat":34.25912,"lng":108.98119,"count":1},
{"lat":34.25056,"lng":108.94397,"count":1},
{"lat":34.25199,"lng":108.93691,"count":1},
{"lat":34.2483,"lng":108.951,"count":1},
{"lat":34.21839,"lng":108.98169,"count":1},
{"lat":34.25932,"lng":108.93932,"count":1},
{"lat":34.24357,"lng":108.94637,"count":1},
{"lat":34.23503,"lng":108.9422,"count":1},
{"lat":34.25853,"lng":108.9631,"count":1},
{"lat":34.26718,"lng":108.92231,"count":1},
{"lat":34.22124,"lng":108.94682,"count":1},
{"lat":34.21185,"lng":108.96099,"count":1},
{"lat":34.25934,"lng":108.93277,"count":1},
{"lat":34.21397,"lng":108.98243,"count":1},
{"lat":34.25777,"lng":108.9389,"count":1},
{"lat":34.25017,"lng":108.95003,"count":1},
{"lat":34.25947,"lng":108.95121,"count":1},
{"lat":34.26925,"lng":108.92067,"count":1},
{"lat":34.23019,"lng":108.93096,"count":1},
{"lat":34.24221,"lng":108.94675,"count":1},
{"lat":34.25507,"lng":108.92551,"count":1},
{"lat":34.25251,"lng":108.93607,"count":1},
{"lat":34.22962,"lng":108.94914,"count":1},
{"lat":34.25235,"lng":108.93906,"count":1},
{"lat":34.22688,"lng":108.94694,"count":1},
{"lat":34.24813,"lng":108.98808,"count":1},
{"lat":34.24371,"lng":108.96344,"count":1},
{"lat":34.25588,"lng":108.96319,"count":1},
{"lat":34.2253,"lng":108.98112,"count":1},
{"lat":34.22497,"lng":108.93902,"count":1},
{"lat":34.23132,"lng":108.96383,"count":1},
{"lat":34.22811,"lng":108.94688,"count":1},
{"lat":34.24817,"lng":108.947,"count":1},
{"lat":34.21997,"lng":108.94665,"count":1},
{"lat":34.26441,"lng":108.96981,"count":1},
{"lat":34.26406,"lng":108.98227,"count":1},
{"lat":34.24994,"lng":108.93235,"count":1},
{"lat":34.24581,"lng":108.9449,"count":1},
{"lat":34.25807,"lng":108.94695,"count":1},
{"lat":34.25797,"lng":108.94347,"count":1},
{"lat":34.25938,"lng":108.97411,"count":1},
{"lat":34.23193,"lng":108.9469,"count":1},
{"lat":34.26381,"lng":108.96513,"count":1},
{"lat":34.2556,"lng":108.9401,"count":1},
{"lat":34.24125,"lng":108.93167,"count":1},
{"lat":34.25927,"lng":108.9416,"count":1},
{"lat":34.25926,"lng":108.97292,"count":1},
{"lat":34.25598,"lng":108.95303,"count":1},
{"lat":34.23056,"lng":108.96374,"count":1},
{"lat":34.23243,"lng":108.97821,"count":1},

];


    if(!isSupportCanvas()){
        alert('热力图目前只支持有canvas支持的浏览器,您所使用的浏览器不能使用热力图功能~')
    }
    //详细的参数,可以查看heatmap.js的文档 https://github.com/pa7/heatmap.js/blob/master/README.md
    //参数说明如下:
    /* visible 热力图是否显示,默认为true
     * opacity 热力的透明度,1-100
     * radius 势力图的每个点的半径大小
     * gradient  {JSON} 热力图的渐变区间 . gradient如下所示
     *  {
            .2:'rgb(0, 255, 255)',
            .5:'rgb(0, 110, 255)',
            .8:'rgb(100, 0, 255)'
        }
        其中 key 表示插值的位置, 0~1.
            value 为颜色值.
     */
    heatmapOverlay = new BMapLib.HeatmapOverlay({"radius":25});
    map.addOverlay(heatmapOverlay);
    heatmapOverlay.setDataSet({data:points,max:20});
    //是否显示热力图
    function openHeatmap(){
        heatmapOverlay.show();
    }
    function closeHeatmap(){
        heatmapOverlay.hide();
    }
    closeHeatmap();
    function setGradient(){
        /*格式如下所示:
        {
            0:'rgb(102, 255, 0)',
            .5:'rgb(255, 170, 0)',
            1:'rgb(255, 0, 0)'
        }*/
        var gradient = {};
        var colors = document.querySelectorAll("input[type='color']");
        colors = [].slice.call(colors,0);
        colors.forEach(function(ele){
            gradient[ele.getAttribute("data-key")] = ele.value;
        });
        heatmapOverlay.setOptions({"gradient":gradient});
    }
    //判断浏览区是否支持canvas
    function isSupportCanvas(){
        var elem = document.createElement('canvas');
        return !!(elem.getContext && elem.getContext('2d'));
    }
</script>